<metal:macro define-macro="collection-tile-macro"
             tal:define="helper_view nocall:context/@@collection_tile_helpers;
                         showCarousel python:'carousel' in view.data.get('css_class');
                         resultsClass python: showCarousel and 'results pat-slider' or 'results';">
  <div class="tile-header">
    <h3 tal:define="title view/data/title|nothing;"
        class="tileTitle"
        tal:condition="title" tal:content="title"></h3>
  </div>

  <div class="tileBody">
    <p tal:condition="not:results"
       class="noResults"
       i18n:translate="tiles_collection_noresults">
     No results found
    </p>
    <div tal:attributes="class resultsClass" tal:condition="results">
      <tal:result repeat="brain results">
        <div class="tile-content"
             tal:define="obj brain/getObject;
                         image_tag python:helper_view.get_image_tag(obj);
                         title brain/Title;
                         description brain/Description">
          <figure class="item-image" tal:condition="image_tag" tal:content="structure image_tag" />
          <div class="item-title"><a href="#" tal:attributes="href brain/getURL; title title" tal:content="title"></a></div>
        </div>
      </tal:result>
      <tal:showmore tal:condition="python:view.data.get('show_more') and view.data.get('title') and not showCarousel">
        <a href="#" tal:attributes="href collection/absolute_url"
           tal:define="show_more_label view/data/show_more_label|nothing">
          <span tal:condition="not:show_more_label"
                i18n:translate="more_url">More&hellip;</span>
              <span tal:condition="show_more_label" tal:content="show_more_label"></span>
        </a>
      </tal:showmore>
    </div>
  </div>
</metal:macro>
